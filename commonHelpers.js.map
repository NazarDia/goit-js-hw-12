{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nexport default function showMessage() {\n  iziToast.show({\n    close: false,\n    closeOnClick: true,\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'white',\n    timeout: 3000,\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    position: 'topRight',\n    backgroundColor: 'red',\n    progressBar: false,\n  });\n}\n\nexport let lightbox = new SimpleLightbox('#gallery a', {\n  overlayOpacity: 0.5,\n  showCounter: false,\n});\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\n\nform.addEventListener('submit', fetchImages);\n\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function fetchImages(e) {\n  loader.classList.remove('hide');\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('hide');\n  e.preventDefault();\n  currentPage = 1;\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '41488002-513c6a9a4c115eae6a99045d3',\n        q: input.value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: currentPage,\n      },\n    });\n\n    const images = response.data.hits;\n\n    setTimeout(() => {\n      loader.classList.add('hide');\n      if (images.length === 0) {\n        return showMessage();\n      }\n      renderImages(images);\n      showLoadMoreButton();\n    }, 2000);\n  } catch (error) {\n    console.error(error);\n  }\n\n  form.reset();\n}\n\nfunction renderImages(images) {\n  gallery.innerHTML = images.reduce(\n    (\n      html,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"image-desc\">\n          <div class=\"container-link\">Likes <span class=\"container-item\">${likes}</span></div>\n          <div class=\"container-link\">Views <span class=\"container-item\">${views}</span></div>\n          <div class=\"container-link\">Comments <span class=\"container-item\">${comments}</span></div>\n          <div class=\"container-link\">Downloads <span class=\"container-item\">${downloads}</span></div>\n        </div>\n      </li>\n      `,\n    ''\n  );\n  lightbox.refresh();\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hide');\n}\n\nasync function loadMoreImages() {\n  loader.classList.remove('hide');\n  loadMoreBtn.classList.add('hide');\n  currentPage++;\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '41488002-513c6a9a4c115eae6a99045d3',\n        q: input.value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: currentPage,\n      },\n    });\n\n    const images = response.data.hits;\n\n    setTimeout(() => {\n      loader.classList.add('hide');\n      if (images.length === 0) {\n        return showMessage();\n      }\n      renderImages(images);\n      showLoadMoreButton();\n    }, 2000);\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["showMessage","iziToast","lightbox","SimpleLightbox","form","input","gallery","loader","loadMoreBtn","currentPage","fetchImages","loadMoreImages","e","images","axios","renderImages","showLoadMoreButton","error","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAMe,SAASA,GAAc,CACpCC,EAAS,KAAK,CACZ,MAAO,GACP,aAAc,GACd,QACE,2EACF,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,MACjB,YAAa,EACjB,CAAG,CACH,CAEO,IAAIC,EAAW,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,YAAa,EACf,CAAC,EAED,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAc,EAElBL,EAAK,iBAAiB,SAAUM,CAAW,EAE3CF,EAAY,iBAAiB,QAASG,CAAc,EAEpD,eAAeD,EAAYE,EAAG,CAC5BL,EAAO,UAAU,OAAO,MAAM,EAC9BD,EAAQ,UAAY,GACpBE,EAAY,UAAU,IAAI,MAAM,EAChCI,EAAE,eAAc,EAChBH,EAAc,EAEd,GAAI,CAaF,MAAMI,GAZW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGT,EAAM,MACT,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMI,CACP,CACP,CAAK,GAEuB,KAAK,KAE7B,WAAW,IAAM,CAEf,GADAF,EAAO,UAAU,IAAI,MAAM,EACvBM,EAAO,SAAW,EACpB,OAAOb,EAAW,EAEpBe,EAAaF,CAAM,EACnBG,GACD,EAAE,GAAI,CACR,OAAQC,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CAEDb,EAAK,MAAK,CACZ,CAEA,SAASW,EAAaF,EAAQ,CAC5BP,EAAQ,UAAYO,EAAO,OACzB,CACEK,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,mBAEaE;AAAA,sBACGD,WAAsBE;AAAA;AAAA;AAAA,2EAG+BC;AAAA,2EACAC;AAAA,8EACGC;AAAA,+EACCC;AAAA;AAAA;AAAA,QAI3E,EACJ,EACEvB,EAAS,QAAO,CAClB,CAEA,SAASc,GAAqB,CAC5BR,EAAY,UAAU,OAAO,MAAM,CACrC,CAEA,eAAeG,GAAiB,CAC9BJ,EAAO,UAAU,OAAO,MAAM,EAC9BC,EAAY,UAAU,IAAI,MAAM,EAChCC,IAEA,GAAI,CAaF,MAAMI,GAZW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGT,EAAM,MACT,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMI,CACP,CACP,CAAK,GAEuB,KAAK,KAE7B,WAAW,IAAM,CAEf,GADAF,EAAO,UAAU,IAAI,MAAM,EACvBM,EAAO,SAAW,EACpB,OAAOb,EAAW,EAEpBe,EAAaF,CAAM,EACnBG,GACD,EAAE,GAAI,CACR,OAAQC,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH"}